# Database Configuration
# PostgreSQL connection string for Neon serverless database
# Format: postgresql+asyncpg://user:password@host/database
# Note: Uses asyncpg driver for async SQLAlchemy support
DATABASE_URL=postgresql+asyncpg://user:password@ep-xxxxx.us-east-1.aws.neon.tech/your_database

# OpenAI API Configuration
# API key for OpenAI agent inference and tool execution
# Required for the AI chatbot to process natural language and execute task operations
# Get your key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Better Auth JWT Secret
# Secret key used to sign and verify JWT tokens for authentication
# Must be a secure, random string (minimum 32 characters recommended)
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=your-secure-random-secret-key-here

# ============================================================================
# Security Configuration (T083-T085)
# ============================================================================

# Frontend URL for CORS Configuration (T085)
# Comma-separated list of allowed frontend origins
# Examples:
#   - Development: FRONTEND_URL=http://localhost:3000
#   - Multiple: FRONTEND_URL=http://localhost:3000,https://staging.example.com
#   - Production: FRONTEND_URL=https://example.com
FRONTEND_URL=http://localhost:3000

# Rate Limiting (T083)
# Maximum number of requests allowed per minute per user
# Default: 10 requests per minute
# Increase for production if needed (e.g., 60 for higher throughput)
RATE_LIMIT_PER_MINUTE=10

# Message Length Validation (T084)
# Maximum number of characters allowed per message
# Default: 10,000 characters
# This prevents abuse and ensures reasonable response times
MAX_MESSAGE_LENGTH=10000

# Environment Configuration
# Set to 'production' to disable credentials in CORS
# Options: development, production
ENVIRONMENT=development

# ============================================================================
# Logging Configuration (T077, T078, T079)
# ============================================================================

# Log Level: Control verbosity of logging output
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Recommended: INFO for production, DEBUG for development
# Default: INFO
LOG_LEVEL=INFO

# Log Format: Choose between structured JSON or human-readable text
# Options: JSON (structured logs for log aggregation systems), TEXT (human-readable)
# Recommended: JSON for production, TEXT for development
# Default: JSON
LOG_FORMAT=JSON

# Log File: Optional file path for persistent logging
# If empty, logs only go to stdout/stderr
# Example: /var/log/todo-ai-chatbot/app.log
# Default: "" (stdout only)
LOG_FILE=

# Log File Rotation: Max file size before rotation
# Format: Integer in bytes
# Default: 10485760 (10MB)
LOG_FILE_MAX_BYTES=10485760

# Log File Backup Count: Number of backup files to keep
# Default: 5
LOG_FILE_BACKUP_COUNT=5

# Slow Query Threshold: Database queries slower than this (ms) are logged as warnings
# Format: Float in milliseconds
# Default: 500.0 (500ms)
SLOW_QUERY_THRESHOLD_MS=500.0

# Slow Request Threshold: HTTP requests slower than this (ms) are logged as warnings
# Format: Float in milliseconds
# Default: 3000.0 (3000ms / 3 seconds)
SLOW_REQUEST_THRESHOLD_MS=3000.0

# ============================================================================
# Optional: Redis for Rate Limiting (Production)
# ============================================================================

# Redis connection URL for distributed rate limiting
# Required for multi-instance deployments
# Format: redis://user:password@host:port/db
# If not set, rate limiting uses in-memory storage (single instance only)
# REDIS_RATE_LIMIT_URL=redis://localhost:6379/0
